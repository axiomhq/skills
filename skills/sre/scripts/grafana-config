#!/bin/bash
# Get Grafana config for a deployment (wrapper for unified config)
# Usage: eval "$(grafana-config <deployment>)"
# Returns: GRAFANA_URL and auth variables

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DEPLOYMENT="${1:-}"

if [[ -z "$DEPLOYMENT" ]]; then
    echo "Usage: grafana-config <deployment>" >&2
    echo "" >&2
    echo "Available deployments:" >&2
    "$SCRIPT_DIR/config" --list grafana | sed 's/^/  /' >&2
    exit 1
fi

"$SCRIPT_DIR/config" grafana "$DEPLOYMENT"
